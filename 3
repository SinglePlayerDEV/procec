#include <windows.h>
#include <iostream>

using namespace std;

int* arr;          // Указатель на массив
int siz;           // Размер массива

// Функция вспомогательного потока (замена на противоположные)
DWORD WINAPI Helper(LPVOID)
{
    cout << "Thread Helper started (replacing with opposite values)" << endl;

    // Заменяем каждый элемент на противоположный
    for (int i = 0; i < siz; i++) {
        arr[i] = -arr[i];  // Меняем знак на противоположный
    }

    cout << "Thread Helper finished" << endl;
    return 0;
}

int main()
{
    cout << "Enter array size: ";
    cin >> siz;

    // Выделяем память для массива
    arr = new int[siz];

    // Заполняем массив
    cout << "Enter " << siz << " elements: ";
    for (int i = 0; i < siz; i++) {
        cin >> arr[i];
    }

    // Выводим исходный массив
    cout << "Original array: ";
    for (int i = 0; i < siz; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;

    // Создаем поток для обработки
    HANDLE hThread = CreateThread(NULL, 0, Helper, NULL, 0, NULL);
    if (hThread == NULL) {
        cout << "Error creating thread!" << endl;
        delete[] arr;
        return 1;
    }

    // Ждем завершения потока
    WaitForSingleObject(hThread, INFINITE);

    // Закрываем дескриптор потока
    CloseHandle(hThread);

    // Выводим результат работы потока helper
    cout << "Array after replacing with opposite values: ";
    for (int i = 0; i < siz; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;

    // Освобождаем память
    delete[] arr;

    return 0;
}
